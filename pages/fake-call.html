<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake Call - SHEGUARD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/animations.css">
    <style>
        .call-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body class="bg-gray-900 min-h-screen">

    <!-- SETUP SCREEN -->
    <div id="setupScreen" class="p-6 h-screen flex flex-col">
        <header class="text-white mb-8 mt-4">
            <a href="dashboard.html" class="inline-block mb-4"><i class="fas fa-arrow-left"></i> Back</a>
            <h1 class="text-3xl font-bold">Fake Call</h1>
            <p class="text-gray-400">Schedule a call to escape awkward situations.</p>
        </header>

        <div class="glass-dark p-6 rounded-2xl space-y-6 flex-1">
            <div>
                <label class="text-gray-300 block mb-2">Caller Name</label>
                <input type="text" id="callerName" value="Dad" class="w-full bg-gray-800 border border-gray-700 text-white rounded-lg p-3 focus:border-purple-500 outline-none">
            </div>

            <div>
                <label class="text-gray-300 block mb-2">Trigger In</label>
                <div class="grid grid-cols-3 gap-3">
                    <button onclick="setTimer(5)" class="timer-btn bg-gray-800 text-white py-3 rounded-lg border border-gray-700 hover:bg-purple-600 focus:bg-purple-600">5s</button>
                    <button onclick="setTimer(15)" class="timer-btn bg-gray-800 text-white py-3 rounded-lg border border-gray-700 hover:bg-purple-600 focus:bg-purple-600">15s</button>
                    <button onclick="setTimer(60)" class="timer-btn bg-gray-800 text-white py-3 rounded-lg border border-gray-700 hover:bg-purple-600 focus:bg-purple-600">1m</button>
                </div>
            </div>

            <div id="countdownDisplay" class="text-center text-4xl font-mono text-purple-400 my-8 hidden">
                00:00
            </div>

            <button id="startBtn" onclick="startSchedule()" class="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-4 rounded-xl shadow-lg mt-auto">
                Schedule Call
            </button>
        </div>
    </div>

    <!-- INCOMING CALL SCREEN (Hidden initially) -->
    <div id="callScreen" class="fixed inset-0 bg-gray-900 z-50 flex flex-col hidden bg-[url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=1000&auto=format&fit=crop')] bg-cover bg-center">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
        
        <div class="relative z-10 flex-1 flex flex-col items-center pt-20">
            <div class="w-24 h-24 bg-gray-300 rounded-full flex items-center justify-center text-4xl text-gray-600 mb-6 border-2 border-white/20">
                <i class="fas fa-user"></i>
            </div>
            <h2 id="displayCaller" class="text-3xl text-white font-semibold">Dad</h2>
            <p class="text-gray-300 mt-2">Mobile</p>
        </div>

        <div class="relative z-10 pb-20 px-10">
            <div class="flex justify-between items-center">
                <div class="flex flex-col items-center space-y-2">
                    <button onclick="endCall()" class="call-btn bg-red-500 shadow-lg shadow-red-500/50">
                        <i class="fas fa-phone-slash transform rotate-[135deg]"></i>
                    </button>
                    <span class="text-white text-sm">Decline</span>
                </div>

                <div class="flex flex-col items-center space-y-2">
                    <button onclick="answerCall()" class="call-btn bg-green-500 shadow-lg shadow-green-500/50">
                        <i class="fas fa-phone"></i>
                    </button>
                    <span class="text-white text-sm">Accept</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let timer = null;

        function setTimer(seconds) {
            document.querySelectorAll('.timer-btn').forEach(b => b.classList.remove('bg-purple-600'));
            event.target.classList.add('bg-purple-600');
            window.selectedSeconds = seconds;
        }

        function startSchedule() {
            if(!window.selectedSeconds) window.selectedSeconds = 5;
            
            const btn = document.getElementById('startBtn');
            const display = document.getElementById('countdownDisplay');
            
            btn.disabled = true;
            btn.innerText = "Timer Running...";
            display.classList.remove('hidden');
            
            let left = window.selectedSeconds;
            display.innerText = `00:${left < 10 ? '0'+left : left}`;

            timer = setInterval(() => {
                left--;
                display.innerText = `00:${left < 10 ? '0'+left : left}`;
                
                if(left <= 0) {
                    clearInterval(timer);
                    triggerCall();
                }
            }, 1000);
        }

        function triggerCall() {
            const name = document.getElementById('callerName').value;
            document.getElementById('displayCaller').innerText = name;
            
            document.getElementById('setupScreen').classList.add('hidden');
            document.getElementById('callScreen').classList.remove('hidden');
            
            // Play Ringtone (Mock with vibration/visuals as browser might block audio)
            if(navigator.vibrate) navigator.vibrate([200, 100, 200, 100, 200, 100, 500]);
        }

        function endCall() {
            location.reload(); // Reset
        }

        function answerCall() {
            // Fake "In Call" UI
            document.getElementById('displayCaller').innerText = "00:00";
            // Start counting up
            let s = 0;
            setInterval(() => {
                s++;
                let m = Math.floor(s / 60);
                let sc = s % 60;
                document.getElementById('displayCaller').innerText = `${m < 10 ? '0'+m : m}:${sc < 10 ? '0'+sc : sc}`;
            }, 1000);
            
            // Hide buttons, show "End Call" only
            const btns = document.querySelectorAll('.call-btn');
            btns[1].parentElement.style.display = 'none'; // Hide accept
            btns[0].parentElement.style.margin = '0 auto'; // Center decline
        }
    </script>
</body>
</html>
